<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Verito's Mexico trip ðŸ‡²ðŸ‡½</title>
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bulma@0.9.4/css/bulma.min.css"
    />
    <script src="https://cdn.jsdelivr.net/npm/js-confetti@latest/dist/js-confetti.browser.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.30.1/moment.min.js"></script>
    <style>
      main {
        min-height: 100vh;
        display: flex;
        flex-direction: column;
      }
    </style>
  </head>

  <body>
    <main>
      <section class="hero is-primary">
        <div class="hero-body">
          <div class="container has-text-centered">
            <h1 class="title is-1">Verito's Mexico trip ðŸ‡²ðŸ‡½</h1>
          </div>
        </div>
      </section>
      <div
        class="container has-text-centered"
        style="
          height: 100%;
          display: flex;
          justify-content: center;
          align-items: center;
        "
      >
        <p id="time" class="subtitle is-1"></p>
      </div>
    </main>

    <script>
      const ARRIVAL_DATE = 'Sun, 26 Feb 2023 09:00:00 GMT';
      const isAniversary = new Date().getMonth() === 1 && new Date().getDate() === 26;

      const jsConfetti = new JSConfetti()

      function timeAgo() {
        const now = moment();
        const arrival = moment(ARRIVAL_DATE);
        const diff = now.diff(arrival);
        const duration = moment.duration(diff);
        const days = Math.floor(duration.asDays());
        const hours = duration.hours();
        const minutes = duration.minutes();
        const seconds = duration.seconds();
        const time = `${days} days, ${hours} hours, ${minutes} minutes, and ${seconds} seconds`;
        document.getElementById('time').textContent = time;

        if (isAniversary) {
          const second = new Date().getSeconds();
          if (second % 2 === 0) {
            jsConfetti.addConfetti()
          }
        }
      }

      // Update the count down every 1 second
      const intervalId = setInterval(timeAgo, 1000);
    </script>
  </body>
</html>
